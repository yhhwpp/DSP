<!--#include virtual="/bos-front/dev/common/head.html"-->
<div id="js-account-container" class="tf-receipt">
    <!-- 重置密码 -->
    <div class="modal fade bs-example-modal-sm" id="reset-passwd-wrapper" tabindex="-1" role="dialog" aria-labelledby="">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">重置密码</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <input type="text" class="form-control" id="new-passwd" placeholder="请输入新密码">
                        <input id="user-id" type="hidden">
                        <span id="show-tips" class="text-danger"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="reset-passwd-confirm">确认</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加/修改帐号 -->
    <div class="modal fade" id="add-account-panel" tabindex="-1" role="dialog" aria-labelledby="">
        <div class="modal-dialog" role="document" style="width:600px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">编辑账号</h4>
                </div>
                <div class="modal-body">
                    <form id="add-account-container" class="form-horizontal">
                        <!--<div class="form-group required">
                            <label for="" class="col-sm-3 control-label">账号角色:</label>
                            <div class="col-sm-8" style="padding-top: 7px;">
                                <ul class="add-account-role">
                                    <li><input type="radio" class="role"><span>运营</span></li>
                                    <li><input type="radio" class="role"><span>销售</span></li>
                                    <li><input type="radio" class="role"><span>财务</span></li>
                                    <li><input type="radio" class="role"><span>管理员</span></li>
                                </ul>
                                <span style="color:blue; cursor: pointer;">+新建新角色</span>
                            </div>
                        </div>
                        <div class="form-group required">
                            <label for="" class="col-sm-3 control-label">登录账号:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="act-username" maxlength="16"
                                    placeholder="登录账号必须由2-16个中文，字母，数字组成"
                                    check-type="required loginaccount" required-message="请输入登录账号">
                            </div>
                        </div>
                        <div class="form-group required">
                            <label for="" class="col-sm-3 control-label">登录密码:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="password" onfocus="this.type='password'" maxlength="16"
                                    placeholder="6-16位字符"
                                    check-type="required password" required-message="请输入密码">
                            </div>
                        </div>
                        <div class="form-group required">
                            <label for="" class="col-sm-3 control-label">联系人:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="contact-name" maxlength="20" placeholder="请输入联系人"
                                    check-type="required contact" required-message="请输入联系人">
                            </div>
                        </div>
                        <div class="form-group required">
                            <label for="" class="col-sm-3 control-label">邮箱:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="email-address" placeholder="请输入邮箱"
                                    check-type="required mail" required-message="请输入邮箱">
                            </div>
                        </div>
                        <div class="form-group required">
                            <label for="" class="col-sm-3 control-label">手机号:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="phone" maxlength="11" placeholder="请输入手机号码"
                                    check-type="required mobile" required-message="请输入手机号码">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-3 control-label">QQ:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="qq" maxlength="20"
                                     placeholder="输入QQ号"
                                    check-type="qq">
                            </div>
                        </div>-->
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="add-account-confirm">确认</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 权限管理 -->
    <div class="modal fade" id="modify-permissions" tabindex="-1" role="dialog" aria-labelledby="">
        <div class="modal-dialog" role="document" style="width: 800px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">角色权限管理</h4>
                </div>
                <div class="modal-body" style="padding: 5px 0; overflow: hidden;">
                    <form id="edit-role-container" class="form-horizontal">
                        <!-- <ul class="nav navbar-nav role-nav">
                            <li class="active"><a href="javascript:;">运营</a></li>
                            <li><a href="javascript:;">销售</a></li>
                            <li><a href="javascript:;">财务</a></li>
                            <li><a href="javascript:;">管理员</a></li>
                            <li><a href="javascript:;"> + 新建角色</a></li>
                        </ul>
                        <div style="float:left; position: relative; width: 660px;">
                            <div>
                                <div class="row">
                                    <label class="col-sm-2 control-label">角色名称：</label>
                                    <div class="col-sm-4">
                                        <input type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div class="row">
                                    <label class="col-sm-2 control-label">角色权限：</label>
                                    <div class="col-sm-10" style="padding-top: 7px;">
                                        <div>
                                            <p><input type="checkbox" class="role-checkbox"><span>自营权限</span></p>
                                            <ul class="role-permissions-list">
                                                <li><input type="checkbox" class="role-checkbox"><span>运营概览（菜单）</span></li>
                                                <li><input type="checkbox" class="role-checkbox"><span>广告管理（菜单）</span></li>
                                                <li><input type="checkbox" class="role-checkbox"><span>广告主管理（菜单）</span></li>
                                                <li><input type="checkbox" class="role-checkbox"><span>广告位管理（菜单）</span></li>
                                                <li><input type="checkbox" class="role-checkbox"><span>统计报表（菜单）</span></li>
                                                <li><input type="checkbox" class="role-checkbox"><span>财务管理（菜单）</span></li>
                                                <li><input type="checkbox" class="role-checkbox"><span>账号管理（菜单）</span></li>
                                            </ul>
                                        </div>

                                        <div>
                                            <p><input type="checkbox" class="role-checkbox"><span>联盟权限</span></p>
                                            <ul class="role-permissions-list">
                                                <li><input type="checkbox" class="role-checkbox"><span>运营概览（菜单）</span></li>
                                                <li><input type="checkbox" class="role-checkbox"><span>广告管理（菜单）</span></li>
                                                <li><input type="checkbox" class="role-checkbox"><span>广告位管理（菜单）</span></li>
                                                <li><input type="checkbox" class="role-checkbox"><span>统计报表（菜单）</span></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="modify-permissions-confirm">确认</button>
                </div>
            </div>
        </div>
    </div>
    <!-- 表格数据 -->
    <div id="addaccount-btn-wrapper" class="table-ctl">
        <span id="addaccount-btn" class="btn btn-primary pull-right"> + 新建账号 </span>
        <span id="role-edit-btn" class="btn btn-primary pull-right" data-roleid="0"> 角色权限管理 </span>
    </div>

    <div id="table-wrapper">
        <table id="account-table" class="table table-striped table-bordered table-hover table-fixed-header"></table>
    </div>
</div>
<script type="text-x-dot-template" id="tpl-editaccount">
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">账号角色:</label>
        <div class="col-sm-8" style="padding-top: 7px;">
            <div class="form-group required">
                <ul class="add-account-role" id="account-role-wrapper">
                    <% for (var key in it.roleList) {%>
                        <%if (it.roleList.hasOwnProperty(key)) {%>
                            <li><input required-message="请选择角色" check-type="required" name='role' type="radio" class="role" value="<%=key%>" <%= (String(key) === String(it.userInfo.role_id) ? 'checked' : '')%>><span><%=it.roleList[key].name%></span></li>
                        <%}%>
                    <%}%>
                </ul>
            </div>
            <span style="color:blue; cursor: pointer;" data-roleid="0" data-type="open-role-edit-btn">+新建新角色</span>
        </div>
    </div>
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">登录账号:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="act-username" maxlength="16"
                placeholder="登录账号必须由2-16个中文，字母，数字组成"
                check-type="required loginaccount" required-message="请输入登录账号" value="<%=it.userInfo.username%>" readonly="readonly">
        </div>
    </div>
    <input type="hidden" id="password" value="">
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">联系人:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="contact-name" maxlength="20" placeholder="请输入联系人"
                check-type="required contact" required-message="请输入联系人" value="<%=it.userInfo.contact_name%>">
        </div>
    </div>
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">邮箱:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="email-address" placeholder="请输入邮箱"
                check-type="required mail" required-message="请输入邮箱" value="<%=it.userInfo.email_address%>">
        </div>
    </div>
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">手机号:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="phone" maxlength="11" placeholder="请输入手机号码"
                check-type="required mobile" required-message="请输入手机号码" value="<%=it.userInfo.contact_phone%>">
        </div>
    </div>
    <div class="form-group">
        <label for="" class="col-sm-3 control-label">QQ:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="qq" maxlength="20"
                 placeholder="输入QQ号"
                check-type="qq" value="<%=it.userInfo.qq%>">
        </div>
    </div>
</script>
<script type="text-x-dot-template" id="tpl-addaccount">
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">账号角色:</label>
        <div class="col-sm-8" style="padding-top: 7px;">
            <div class="form-group required">
                <ul class="add-account-role" id="account-role-wrapper">
                    <% for (var key in it.roleList) {%>
                        <%if (it.roleList.hasOwnProperty(key)) {%>
                            <li><input required-message="请选择角色" check-type="required" name='role' type="radio" class="role" value="<%=key%>"><span><%=it.roleList[key].name%></span></li>
                        <%}%>
                    <%}%>
                </ul>
            </div>
            <span style="color:blue; cursor: pointer;" data-roleid="0" data-type="open-role-edit-btn">+新建新角色</span>
        </div>
    </div>
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">登录账号:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="act-username" maxlength="16"
                placeholder="登录账号必须由2-16个中文，字母，数字组成"
                check-type="required loginaccount" required-message="请输入登录账号">
        </div>
    </div>
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">登录密码:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="password" onfocus="this.type='password'" maxlength="16"
                placeholder="6-16位字符"
                check-type="required password" required-message="请输入密码">
        </div>
    </div>
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">联系人:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="contact-name" maxlength="20" placeholder="请输入联系人"
                check-type="required contact" required-message="请输入联系人">
        </div>
    </div>
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">邮箱:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="email-address" placeholder="请输入邮箱"
                check-type="required mail" required-message="请输入邮箱">
        </div>
    </div>
    <div class="form-group required">
        <label for="" class="col-sm-3 control-label">手机号:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="phone" maxlength="11" placeholder="请输入手机号码"
                check-type="required mobile" required-message="请输入手机号码">
        </div>
    </div>
    <div class="form-group">
        <label for="" class="col-sm-3 control-label">QQ:</label>
        <div class="col-sm-8">
            <input type="text" class="form-control" id="qq" maxlength="20"
                 placeholder="输入QQ号"
                check-type="qq">
        </div>
    </div>
</script>
<script type="text-x-dot-template" id="tpl-edit-role">
    <ul class="nav navbar-nav role-nav" id="pre-role-list-wrapper">
        <% for (var key in it.roleList) {%>
            <%if (it.roleList.hasOwnProperty(key)) {%>
                <li><a href="javascript:;" data-roleid="<%= key%>"><%=it.roleList[key].name%></a></li>
            <%}%>
        <%}%>
        <li><a href="javascript:;" data-roleid="0"> + 新建角色</a></li>
    </ul>
    <div style="float:left; position: relative; width: 660px;">
        <div>
            <div class="row form-group required">
                <label class="col-sm-2 control-label">角色名称：</label>
                <div class="col-sm-4">
                    <input id="pre-role-name" type="text" class="form-control" placeholder="请输入角色名"
                    check-type="required" required-message="请输入角色名" maxlength="12">
                </div>
            </div>
        </div>
        <div>
            <div class="row form-group required">
                <label class="col-sm-2 control-label">角色权限：</label>
                <div class="col-sm-10" style="padding-top: 7px;" id="permission-list-wrapper">
                    <div data-type="permission-self-wrapper">
                        <p><input type="checkbox" class="role-checkbox" data-type="toggle-select-self"><span>自营权限</span></p>
                        <ul class="role-permissions-list" data-type="role-permissions-list">
                            <% for (var key in it.operationList.self) {
                                if (it.operationList.self.hasOwnProperty(key)) {%>
                                        <li><input type="checkbox" check-type="required" data-type="role-permissions" data-role="self" name="role-permissions" class="role-checkbox" value="<%=key%>"><span><%=it.operationList.self[key].label%></span></li>
                                <%}
                            }%>
                        </ul>
                    </div>

                    <% if (ManagerAccount.kind === CONSTANT.kind_all && it.operationList.union) {%>
                        <div data-type="permission-union-wrapper">
                            <p><input type="checkbox" class="role-checkbox" data-type="toggle-select-union"><span>联盟权限</span></p>
                            <ul class="role-permissions-list" data-type="role-permissions-list">
                                <% for (var key in it.operationList.union) {
                                    if (it.operationList.union.hasOwnProperty(key)) {%>
                                        <li><input type="checkbox" check-type="required" data-type="role-permissions" data-role="union" name="role-permissions" class="role-checkbox" value="<%=key%>"><span><%=it.operationList.union[key].label%></span></li>
                                    <%}
                                }%>
                            </ul>
                        </div>
                    <%}%>
                </div>
            </div>
        </div>
    </div>
</script>
<script src="../../../js/common/validate.js"></script>
<script src="../js/account-index.js"></script>
<!--#include virtual="/bos-front/dev/common/footer.html"-->